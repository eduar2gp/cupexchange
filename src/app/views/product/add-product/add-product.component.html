@if (providerData$ | async; as provider) {
<div class="provider-header">
  <img [src]="provider.profileImageUrl"
       alt="{{provider.name}} profile"
       class="provider-avatar"
       width="64"
       height="64" />
  <span class="provider-name">{{provider.name}}</span>
</div>
}

<div class="card form-card">
  <h2 class="card-title">Add New Product</h2>

  <form #productForm="ngForm" (ngSubmit)="saveProduct(productForm.valid!)" class="product-form">
    <div class="form-grid">
      <div class="form-group">
        <label for="name">Product Name</label>
        <input id="name"
               type="text"
               [(ngModel)]="newProduct.name"
               name="name"
               placeholder="e.g. Wireless Mouse"
               required
               class="form-input" />
      </div>

      <div class="form-group">
        <label for="price">Price</label>
        <input id="price"
               type="number"
               [(ngModel)]="newProduct.price"
               name="price"
               placeholder="29.99"
               required
               min="0.01"
               step="0.01"
               class="form-input" />
      </div>

      <div class="form-group">
        <label for="stock">Stock Quantity</label>
        <input id="stock"
               type="number"
               [(ngModel)]="newProduct.stockQuantity"
               name="stockQuantity"
               placeholder="0"
               required
               min="0"
               class="form-input" />
      </div>
    </div>

    <div class="form-group">
      <label for="description">Description</label>
      <textarea id="description"
                [(ngModel)]="newProduct.description"
                name="description"
                placeholder="Describe the product features, materials, etc..."
                rows="4"
                required
                class="form-textarea"></textarea>
    </div>

    <div class="form-group">
      <label for="image">Product Image</label>
      <div class="file-upload-wrapper">
        <input id="image"
               type="file"
               (change)="onFileSelected($event)"
               accept="image/*"
               #fileInput
               class="file-input" />
        <span class="file-label">Choose file or drag & drop</span>
      </div>
    </div>

    @if (statusMessage()) {
    <p class="status-message"
       [class.status-success]="isSuccess"
       [class.status-error]="!isSuccess">
      {{ statusMessage() }}
    </p>
    }

    <button type="submit"
            [disabled]="!productForm.valid || saving()"
            class="submit-btn"
            [class.submit-btn--valid]="productForm.valid && !saving()">
      @if (saving()) {
      Saving...
      } @else {
      Create Product
      }
    </button>
  </form>
</div>
