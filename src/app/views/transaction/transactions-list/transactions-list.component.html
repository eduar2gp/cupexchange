<div class="transactions-page">

  <!-- Loading -->
  @if (loading()) {
  <div class="state-container">
    <mat-progress-spinner mode="indeterminate"
                          diameter="48">
    </mat-progress-spinner>

    <p class="state-text">Loading transactions...</p>
  </div>
  }

  <!-- Error -->
  @if (error()) {
  <div class="state-container error">
    <mat-icon class="state-icon">error_outline</mat-icon>
    <p class="state-text">{{ error() }}</p>

    <button mat-raised-button
            color="primary"
            class="retry-button"
            (click)="refresh()">
      <mat-icon>refresh</mat-icon>
      Retry
    </button>
  </div>
  }

  <!-- Empty -->
  @if (!loading() && !error() && transactions().length === 0) {
  <div class="state-container empty">
    <mat-icon class="state-icon">receipt_long</mat-icon>
    <p class="state-title">No transactions found</p>
    <p class="state-subtitle">Your transactions will appear here</p>
  </div>
  }

  <!-- List -->
  @if (!loading() && !error() && transactions().length > 0) {
  <div class="transactions-card">

    <h3 class="transactions-title">Transacciones</h3>

    <div class="transactions-list">
      @for (tx of transactions(); track tx) {
      <div class="transaction-item"
           [class.positive]="tx.amount >= 0"
           [class.negative]="tx.amount < 0">

        <div class="transaction-main">
          <!-- Left -->
          <div class="transaction-left">
            <div class="type-icon">
              <mat-icon>{{ getTypeIcon(tx.type) }}</mat-icon>
            </div>

            <div class="transaction-info">
              <div class="type">
                {{ tx.type.replace('_', ' ') | titlecase }}
              </div>
              <div class="date">
                {{ tx.createdAt | date:'MMM d, y â€¢ h:mm a' }}
              </div>
            </div>
          </div>

          <!-- Right -->
          <div class="amount">
            {{ (tx.amount >= 0 ? '+' : '') + (tx.amount | number:'1.2-8') }}
            {{ tx.currency }}
          </div>
        </div>

      </div>
      }
    </div>
  </div>
  }

</div>
